## 올바르게 API 작성하기 

Not to do 만 안 해도 충분히 좋은 설계를 할 수 있다

공통 Not to doStateless, 리소스를 명사형으로, HTTP method로 목적기술..?기획이 마무리 되지 않은 상태에서 코딩 시작
2. 논의되지 않은 새로운 스택 사용
3. 핵심 기능이 외부 API에만 의존함 (api 사용량을 고려하지 않음) // 카카오맵, 구글맵 etc etc
4. 인증/권한 사용시 passport.js를 사용함 (여러가지 이유로 권장하지 않습니다)

프로젝트에서 Rest api 를 사용했다.. 왜?
면접 질문으로 이어질 수 있다 -> Rest api 가 뭐예요? rest 원칙이 뭐예요? 
-> Stateless, 리소스를 명사형으로, HTTP method로 목적기술을 위해서 

REST의 정의를 우선 알자.
아키텍처 디자인 제약의 모음, 아키텍처 원리의 모음, 자원에 대한 주소를 지정하는 방법으로 디자인 원리/제약, 즉 규칙이다.

REST의 창시자 : RMM 3단계까지는 지켜야 RESTful 하다고 볼 수 있다 
하지만 실제로 단계 2까지만 적용해도 꽤 좋은 디자인이다 
엄밀한 REST API가 아니므로, HTTP API라고 부르기도 함

단계 1이 젤 중요하다! (개별 리소스와의 통신 준수)

리소스란 ?(엔티티) 
RDMBS에서는: 테이블,
객체지향 에서는: 객체가 된다

Slot/1234 <— 이렇게 나누기 까다로우니까
Slots.  <— 이렇게 까지만 엔드포인트 작성해도 된다

응답 실패시 실패한 이유도 반드시 제공해야 된다
Message: “실패한 이유”

GET일 때 body대신 query parameter 사용

단계 
0: HTTP
1: 리소스
2: 메소드
3단계는 다루지 않는다. 구현하기 복잡함..

같은 리소스를 이용하는데 메소드가 다른 경우에는 같은 엔드포인트를 써야 한다
예를 들어
특정 리소스를 검색할 때
블로그 글 검색, 조회, 작성을 할ㄷ 때
Get/article?name=Kim //그런데ㅔ 필터를 걸어줘야 한다!
Get/article
Post/article
이렇게 나눈다

통합검색일 때는 그냥 search 써도 됨!

REST 원칙을 (어느 정도) 따라가기 위한 주요 가이드
단계 1 리소스
엔드포인트 디자인은
언제 어떻게 요청되는가 는 중요하지 않다
어떤 응답이 제공되는가 가 중요하다.

어떤 리소스의 상태를 변화시키는가 가 중요하다!!
엔드포인트에 꼬오옥 리소스를 보여주면 되..
어디서 요청하는지 상관쓰지마라
중요 **리소스를 어떻게 요청하는지는 전혀 상관이 없다..**

냉장고에있는 재료를 가져오는 거면
/ingredient 로 해야된다

동사 사용보다는 리소스를 지칭하는 명사 사용이 권장된다
POST/appointment -> 어떤 거에 대한 예약인지 알 수 없다
POST/slot/123 -> 굿

GET/Inquiry -> 뭘 받아오는지 알 수 없음
GET/doctors/Kim -> 굿


동사를 쓰고 싶어요 ..
13번 글에 대한 좋아요
POST/article/13/like

13번 글에 대한 좋아요 취소
DELETE/article/13/like
POST/article/13/unlike
취향대로 사용

페이지네이션? https://tape22.tistory.com/13

POST 요청에 대한 정보가 응답에 들어가야한다
데이터 베이스에 리소스가 생성 -> code: 201 created
{message”…
seat: g10
User: kimcoding
}
POST 때도 응답에 리소스를 넘겨줘야 하는 이유
내가 영향을 끼친 리소스에 대한 정보를 
같이 줘야 되는 게 좋다

도서 검색 -> 리소스가 정확히 지칭되어있다-> 그래서 검색이지만 post가 아닌 get 요청을 써야한다 .
GET /books?title=code

딜리트에는 바디값을 넣을 필요는 없다..?

북 정보
GET /book?title=유저가입력한값(책이름) 
GET /book?author=최고수
GET /book?query= (이게 나울듯?) 쿼리로 받고 뒤에 if문으로 처리하는 거 

내가 어떤 레시피라는 테이블의 필드에 id, title, contents등등 이 있다면
리소스 조회시 json의 키/값, 타입을 일치시켜야 된다. (실제 데이터와 스키마의 일관성을 맞춤)

좋아요 누른 사람의 유저 아이디로 넘기면 안된다..
아무나 가서 사칭해서 좋아요를 누를 수 있따 ! (그 사람 입장에서는 누르지도 않은 좋아요가 눌러져있는 것) 토큰으로 처리해야됨
 
카멜케이스, 언더스코어케이스가 아닌
앤드포인트를 Spinal-case 로 써야한다!

데브로 PR-> 머지-> 다 확인 후 마스터로 머지